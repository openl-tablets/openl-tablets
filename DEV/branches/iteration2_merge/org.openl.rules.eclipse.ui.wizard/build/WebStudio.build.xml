<?xml version="1.0"?>

<project name="build" default="copy.webstudio.project" basedir="..">

<property name="studio.in.separate.wspace" value="d:/projects/OpenL/STUDIO/branches/iteration2_merge/org.openl.rules.webstudio"/>
<property name="studio.in.the.same.wspace" value="../org.openl.rules.webstudio"/>
<property name="dst_root" value="templates/org.openl.rules.webstudio"/>

<target name = "copy.webstudio.project">
	
	
	<available file="${studio.in.separate.wspace}" property="src_root" value="${studio.in.separate.wspace}"/>
	<available file="${studio.in.the.same.wspace}" property="src_root" value="${studio.in.the.same.wspace}"/>


	
	<echo message="Using ${src_root}"/>
	
	<defaultexcludes remove="**/.svn/**"/>
	<defaultexcludes remove="**/.svn"/>
	<defaultexcludes echo="true"/>
	
	
	<copy preservelastmodified="true" todir="${dst_root}" verbose="true">
		<fileset dir="${src_root}">
			<exclude name="**/CVS/**" />
			<exclude name="**/.svn/**" />
			<exclude name="**/.studioProps/**" />
			<exclude name="**/target/**" />
			<exclude name="**/bin/**" />
			<exclude name="**/work/**" />
		</fileset>
	</copy>
	
	<sync todir="${dst_root}" verbose="true" includeemptydirs="true" overwrite="true">
	  <fileset dir="${src_root}">
		<exclude name="**/CVS/**" />
		<exclude name="**/.svn/**" />
		<exclude name="**/bin/**" />
		<exclude name="**/work/**" />
		<exclude name="**/.studioProps/**" />
		<exclude name="**/target/**" />
	  </fileset>
	  <preserveintarget>
	    <include name="**/CVS/**"/>
		<include name="**/.svn/**" />
	  </preserveintarget>
	</sync>
	
</target>	

</project>