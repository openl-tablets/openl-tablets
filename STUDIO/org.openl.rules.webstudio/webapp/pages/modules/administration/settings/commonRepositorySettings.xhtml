<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
>

    <ui:param name="settings" value="#{repository.settings}" />
    <ui:param name="validators" value="#{settings.validators}" />

    <h:panelGrid id="#{prependId}repoSettings" columns="2" columnClasses="titleColumn">
        <h:outputText value="#{repository.type == 'local' ? 'Directory' : 'URL'}:" styleClass="required" />
        <h:inputText value="#{settings.path}" styleClass="pathInput" disabled="#{settings.repositoryPathSystem}" id="#{prependId}uri" validator="#{validators.url}"/>
        <h:outputText value=""/>
        <h:message for="#{prependId}uri" styleClass="error"/>
        <h:outputLabel value="Secure connection:" for="#{prependId}repositorySecureConnection" />
        <h:selectBooleanCheckbox id="#{prependId}repositorySecureConnection" value="#{settings.secure}"
                                 onmousedown="if($j(this).attr('checked')){if(!window.confirm('Login and password will be deleted. Do you want to continue?')) {return false;}} return this.click()">
            <f:ajax event="change" execute="@form" render="#{prependId}repoSettings" />
        </h:selectBooleanCheckbox>
        <h:outputText value="Login:" rendered="#{settings.secure}"/>
        <h:inputText value="#{settings.login}" rendered="#{settings.secure}"/>
        <h:outputText value="Password:" rendered="#{settings.secure}"/>
        <h:inputSecret value="#{settings.password}" rendered="#{settings.secure}" redisplay="true"/>

        <h:outputText value="Comment pattern:" rendered="#{not isProduction}"/>
        <h:inputText value="#{settings.commentValidationPattern}"
                     title="Regular expression for comment pattern. If empty, comment isn't validated."
                     rendered="#{not isProduction}"
                     id="#{prependId}commentPattern" validator="#{validators.commentValidationPattern}"/>
        <h:outputText value="" rendered="#{not isProduction}"/>
        <h:message for="#{prependId}commentPattern" styleClass="error" rendered="#{not isProduction}"/>

        <h:outputText value="Invalid comment message:" rendered="#{not isProduction}"/>
        <h:inputText value="#{settings.invalidCommentMessage}"
                     title="Message shown when comment is invalid."
                     rendered="#{not isProduction}"
                     id="#{prependId}invalidCommentMessage"/>
        <h:outputText value="" rendered="#{not isProduction}"/>
        <h:message for="#{prependId}invalidCommentMessage" styleClass="error" rendered="#{not isProduction}"/>

        <h:outputLabel value="Version in deployment name:" rendered="#{isProduction}" for="#{prependId}includeVersionInDeploymentName"/>
        <h:selectBooleanCheckbox value="#{settings.includeVersionInDeploymentName}" rendered="#{isProduction}" disabled="#{isEditing}" id="#{prependId}includeVersionInDeploymentName"/>
        <h:inputHidden value="#{settings.includeVersionInDeploymentName}" rendered="#{isProduction and isEditing}"/>
    </h:panelGrid>

</ui:composition>
