<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
>

    <ui:param name="settings" value="#{repository.settings}" />
    <ui:param name="validators" value="#{settings.validators}" />

    <h:panelGrid columns="2" columnClasses="titleColumn">
        <h:outputText value="URL:" styleClass="required"/>
        <h:inputText value="#{settings.uri}" styleClass="pathInput" id="#{prependId}gitUri" validator="#{validators.url}"/>
        <h:outputText value=""/>
        <h:message for="#{prependId}gitUri" styleClass="error"/>
        <h:outputText value="Login:"/>
        <h:inputText value="#{settings.login}"/>
        <h:outputText value="Password:"/>
        <h:inputSecret value="#{settings.password}" redisplay="true"/>

        <h:outputText value="User display name:"/>
        <h:inputText value="#{settings.userDisplayName}" title="User Display Name used when commit to git. If it's empty, WebStudio username will be used."/>

        <h:outputText value="User email:"/>
        <h:inputText value="#{settings.userEmail}" title="User email used when commit to git."
                     id="#{prependId}gitUserEmail" validator="#{validators.userEmail}"/>
        <h:outputText value=""/>
        <h:message for="#{prependId}gitUserEmail" styleClass="error"/>

        <h:outputText value="Local path:" styleClass="required"/>
        <h:inputText value="#{settings.localRepositoryPath}" title="Local path for Git repository."
                     id="#{prependId}gitLocalRepositoryPath" validator="#{validators.localRepositoryPath}"/>
        <h:outputText value=""/>
        <h:message for="#{prependId}gitLocalRepositoryPath" styleClass="error"/>
        <h:outputText value="Branch:" styleClass="required"/>
        <h:inputText value="#{settings.branch}" title="The branch where the changes will be comitted."
                     id="#{prependId}gitBranch" validator="#{validators.branch}"/>
        <h:outputText value=""/>
        <h:message for="#{prependId}gitBranch" styleClass="error"/>
        <h:outputText value="Listener period (sec):"/>
        <h:inputText value="#{settings.listenerTimerPeriod}" id="#{prependId}gitListenerTimerPeriod"
                     title="Repository changes check interval. Must be greater than 0."
                     validatorMessage="Please enter a value greater than 0">
            <f:validateLongRange minimum="1"/>
        </h:inputText>
        <h:outputText value=""/>
        <h:message for="#{prependId}gitListenerTimerPeriod" styleClass="error"/>

        <h:outputText value="Comment pattern:" rendered="#{not isProduction}"/>
        <h:inputText value="#{settings.commentValidationPattern}"
                     title="Regular expression for comment pattern. If empty, comment isn't validated."
                     rendered="#{not isProduction}"
                     id="#{prependId}gitCommentPattern" validator="#{validators.commentValidationPattern}"/>
        <h:outputText value="" rendered="#{not isProduction}"/>
        <h:message for="#{prependId}gitCommentPattern" styleClass="error" rendered="#{not isProduction}"/>

        <h:outputText value="Invalid comment message:" rendered="#{not isProduction}"/>
        <h:inputText value="#{settings.invalidCommentMessage}"
                     title="Message shown when comment is invalid."
                     rendered="#{not isProduction}"
                     id="#{prependId}gitInvalidCommentMessage"/>
        <h:outputText value="" rendered="#{not isProduction}"/>
        <h:message for="#{prependId}gitInvalidCommentMessage" styleClass="error" rendered="#{not isProduction}"/>

        <h:outputLabel value="Version in deployment name:" rendered="#{isProduction}" for="#{prependId}gitIncludeVersionInDeploymentName"/>
        <h:selectBooleanCheckbox value="#{settings.includeVersionInDeploymentName}" rendered="#{isProduction}" disabled="#{isEditing}" id="#{prependId}gitIncludeVersionInDeploymentName"/>
        <h:inputHidden value="#{settings.includeVersionInDeploymentName}" rendered="#{isProduction and isEditing}"/>

        <h:outputText value="Commit template:"/>
        <h:inputText value="#{settings.commentTemplate}"
                     title="Comment pattern for special commits: archive/restore/erase the project. Use {username} for predefined OpenL-specific Commit Type used by OpenL, {user-message} for meaningful message describing commit, {username} for commit author."
                     id="#{prependId}gitCommentTemplate" validator="#{validators.commentValidationTemplate}"/>
        <h:outputText value=""/>
        <h:message for="#{prependId}gitCommentTemplate" styleClass="error"/>

        <h:outputText value="Comment default when save:"/>
        <h:inputText value="#{settings.defaultCommentSave}"
                     title="Default message for 'Save project'"
                     id="#{prependId}gitDefaultCommentSave"/>

    </h:panelGrid>

</ui:composition>
