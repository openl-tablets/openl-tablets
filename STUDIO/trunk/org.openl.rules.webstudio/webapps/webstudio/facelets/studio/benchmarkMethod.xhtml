<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    template="/facelets/common/studioBase.xhtml">

    <ui:define name="header">
        <script type="text/javascript">
            //<![CDATA[
        	function toggleSelectAll(nItems) {
        	    var selectAllCheckBox = document.getElementById("BMForm:BMTable:selectAll");
        	    for(i = 0; i < nItems; i++) {
                    var checkbox = document.getElementById("BMForm:BMTable:" + i + ":BM");
                    if (checkbox) {
                        checkbox.checked = selectAllCheckBox.checked;
                    }
                }
        	}
            //]]>
        </script>
    </ui:define>
    <ui:define name="page">
        <h:outputText style="font-size: large;"
            value="Results of benchmarking #{benchmarkMethodBean.testName} (#{benchmarkMethodBean.testDescr})" />
        <h:form id="BMForm">
            <h:dataTable id="BMTable" value="#{benchmarkMethodBean.benchmarks}" var="item"
                columnClasses="none,ov-matrix,ov-matrix,ov-matrix,ov-matrix,ov-matrix,ov-matrix,ov-matrix"
                headerClass="none" styleClass="ov-matrix"
                binding="#{benchmarkMethodBean.htmlDataTableBM}">
                <h:column>
                    <h:outputText value="#{benchmarkMethodBean.i}." />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Name" />
                    </f:facet>
                    <h:outputText value="#{item.name}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Runs(ms)" />
                    </f:facet>
                    <h:outputText value="#{benchmarkMethodBean.msrun}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Runs/sec" />
                    </f:facet>
                    <h:outputText value="#{benchmarkMethodBean.runssec}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Unit Type" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.unitName}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Units" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.unitRuns}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Unit(ms)" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.msrununit}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Units/sec" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.runsunitsec}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:selectBooleanCheckbox id="selectAll"
                            onclick="toggleSelectAll(#{benchmarkMethodBean.benchmarkCount})" />
                    </f:facet>
                    <h:selectBooleanCheckbox id="BM" value="#{benchmarkMethodBean.bencmarkSelected}" />
                </h:column>
            </h:dataTable>

            <a4j:commandButton action="#{benchmarkMethodBean.compare}"
                value="Compare" render="comparedBMTable"/>
            <a4j:commandButton action="#{benchmarkMethodBean.delete}"
                value="Delete" render="comparedBMTable BMTable"/>
        <h:dataTable id="comparedBMTable" 
            value="#{benchmarkMethodBean.comparedBenchmarks}" var="item"
            columnClasses="none,ov-matrix,ov-matrix,ov-matrix,ov-matrix,ov-matrix,ov-matrix,ov-matrix"
            styleClass="ov-matrix"
            binding="#{benchmarkMethodBean.htmlDataTableBMCompared}">
            <h:column>
                <h:outputText value="#{benchmarkMethodBean.comparedI}." />
            </h:column>
            <h:column>
                <h:outputText value="#{item.name}" />
            </h:column>
            <h:column>
                <h:outputText
                    value="#{benchmarkMethodBean.comparedRunsunitsec}" />
            </h:column>
            <h:column>
                <h:outputText
                    style="#{benchmarkMethodBean.styleForOrder}"
                    value="#{benchmarkMethodBean.comparedOrder}" />
            </h:column>
            <h:column>
                <h:outputText
                    value="#{benchmarkMethodBean.comparedRatio}" />
            </h:column>
        </h:dataTable>

        </h:form>
    </ui:define>
</ui:composition>