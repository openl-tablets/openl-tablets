<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
    xmlns:rich="http://richfaces.ajax4jsf.org/rich"
    xmlns:c="http://java.sun.com/jstl/core"    
    template="/facelets/common/studioWizardBase.xhtml"
    >
    <ui:define name="header">
        <!-- <a4j:loadScript src="resource:///javascript/validator.js" />-->
    </ui:define>
    <ui:define name="page">
        <h:messages errorClass="error" infoStyle="color:green" />

        <h:form id="copyTableForm">
		
            <h2>
	            <h:panelGrid columns="2">                
	                <h:outputText value="Technical table name:" />
	                <h:outputText id="technicalName"
	                    value="#{tableCopierWizard.tableTechnicalName}" />
	            </h:panelGrid>
			</h2> 
            <br />            
            
	
	<fieldset><legend>Table Properties</legend>  
		<table id="propertiesToCopy">
			<c:forEach items="#{tableCopierWizard.propToCopy}" var="propDef">
				<tr><td><h:outputLabel for="#{propDef.displayName}" value="#{propDef.displayName}"/></td>
					<c:if test="#{propDef.stringType}">
						<td><h:inputText id="#{propDef.name}" value="#{propDef.value}" /></td>
					</c:if>
					<c:if test="#{propDef.dateType}">
						<td><rich:calendar id="#{propDef.name}" 
										   value="#{propDef.value}"										   
										   popup="true" 
										   enableManualInput="false"
	      								   jointPoint="bottom-left" 
	      								   datePattern="#{propDef.format}"
	      								   defaultTime = "00:00"
	      								   rendered="true"
	      								   timeZone="#{formatPatterns.defaultTimeZone}">
	      						<f:converter converterId="org.openl.DateConverter" />
	      					</rich:calendar>
	      				</td>
					</c:if>
					<c:if test="#{propDef.booleanType}">
						<td>
							<h:selectBooleanCheckbox value="#{propDef.value}"/>
						</td>
					</c:if>
				</tr>				
			</c:forEach>
		</table>
		</fieldset>
			<h:inputHidden value="1" id="step" binding="#{tableCopierWizardManager.hiddenStep}"/>
      		<h:commandButton value="Prev" action="#{tableCopierWizardManager.prev}"/>
      		<h:commandButton value="Next" action="#{tableCopierWizardManager.next}"/>    
      		<h:commandButton value="Cancel" action="#{tableCopierWizardManager.cancel}"/>       
        </h:form>

        <f:verbatim>
            <script type="text/javascript">
              function validateForm() {
                valid = validateRequired('copyTableForm:technicalName', true);                
                return valid;
              }            
              
            </script>
        </f:verbatim>

    </ui:define>
</ui:composition>
