<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:authz="http://rules.openl.org/taglibs/acegi"
    xmlns:a4j="http://richfaces.org/a4j">

    <style>
        #rb {
            text-align: right;
            padding: 8px 11px;
        }
        #rb a {
            text-decoration: none;
        }
        #rb .dropdown {
            margin: 0 5px 0 9px;
            font-weight: bold;
            text-align: left;
        }
        #rb .dropdown-toggle {
            color: #444;
        }
        #ll a {
            text-decoration: none;
            padding: 6px 15px 7px;
            font-size: 110%;
            color: #1199ee;
        }
        #ll .active {
            color: #555;
            cursor: default;
            background: #f9f9f9;
            border-bottom: 2px solid #4af;
        }
    </style>
  
    <div>
        <div style="position: absolute; left: 11px; top: 4px">
            <a href="#{contextPath}" style="text-decoration: none">
                <ui:include src="/pages/common/logo.xhtml" />
            </a>
        </div>

        <div id="rb">
            <h:panelGroup rendered="#{systemConfig['user.mode'] != 'single'}" class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <authz:authentication operation="username" /><b class="caret"></b>
                </a>
                <ul class="dropdown-menu pull-right" role="menu">
                    <li><a tabindex="-1" href="javascript:void(0)" onclick="editUserDetails();">#{msg['ws.header.user_details']}</a></li>
                    <li class="divider"></li>
                    <li><a tabindex="-1" href="#{contextPath}/security_logout" title="#{msg['ws.header.signout.title']}"
                            onclick="return confirm('#{msg['ws.header.signout.confirm']}')">#{msg['ws.header.signout']}</a></li>
                </ul>
            </h:panelGroup>

            <a href="#" onclick="window.open('http://openl-tablets.org/files/openl-tablets/#{versionProperties['openl.version']}/OpenL Tablets - WebStudio User Guide/index.html','help','width=1000,height=800,screenX=50,screenY=100,resizable=yes,scrollbars=yes,status=yes');return false;"
                title="#{msg['ws.header.help.title']}">#{msg['ws.header.help']}</a>
        </div>

        <div id="ll" style="position: absolute; top: 8px; right: 355px;">
            <a href="#{contextPath}" class="#{menu=='rules' ? 'active' : ''}" onclick="#{menu=='rules' ? 'return false' : ''}" title="#{msg['ws.header.editor.title']}">#{msg['ws.header.editor']}</a>
            <a href="#{contextPath}/faces/pages/modules/repository/index.xhtml" class="#{menu=='repository' ? 'active' : ''}" onclick="#{menu=='repository' ? 'return false' : repositoryTreeState.clearSelectPrj()}" title="#{msg['ws.header.repo.title']}">#{msg['ws.header.repo']}</a>

            <c:set var="adminUrl" value="/faces/pages/modules/administration/settings/index.xhtml" />
            <h:panelGroup rendered="#{authz:hasAccessTo(adminUrl)}">
                <a href="#{contextPath}#{adminUrl}" class="#{menu=='admin' ? 'active' : ''}" onclick="#{menu=='admin' ? 'return false' : ''}" title="#{msg['ws.header.admin.title']}">#{msg['ws.header.admin']}</a>
            </h:panelGroup>

            <h:panelGroup rendered="#{systemConfig['user.mode'] != 'single'}" style="position: relative">
                <ui:include src="/pages/modules/userAccount.xhtml" />
            </h:panelGroup>
        </div>
    </div>
</ui:composition>