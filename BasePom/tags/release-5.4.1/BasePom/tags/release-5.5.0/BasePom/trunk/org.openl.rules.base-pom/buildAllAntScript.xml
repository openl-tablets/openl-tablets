<project name="MyProject" default="singleWorkspace" basedir=".">

	<description>
	    This script is designed to build all projects from base-pom in two ways:
		all projects are placed into single workspace and full SVN project structure.
	</description>

	<property name="rootFolder" value="../../../.." />

    <!-- BEGIN M2 PRESET -->
 	<property name="maven.commoncmd" value="" />

    <condition property="maven.line" value="--offline ${maven.commoncmd}">
        <istrue value="${offline}" />
    </condition>
    <property name="maven.line" value="${maven.commoncmd}" />

    <condition property="maven.executable" value="mvn.bat">
        <os family="windows" />
    </condition>
    <property name="maven.executable" value="mvn" />

    <condition property="maven.executable.real" value="${m2.home}/bin/${maven.executable}">
        <isset property="m2.home" />
    </condition>
    <property name="maven.executable.real" value="${maven.executable}"/>

    <presetdef name="maven">
        <exec failonerror="true" executable="${maven.executable.real}">
            <arg line="${maven.line}" />
        </exec>
    </presetdef>
    <!-- END M2 PRESET -->

        	
	<target name="base-pom">
		<maven dir="../org.openl.rules.base-pom">
			<arg line="clean" />
			<arg line="install" />
		</maven>
	</target>	
	
	<target name="liveexcel-pom">
		<maven dir="../org.openl.rules.liveexcel-pom">
			<arg line="-e" />
			<arg line="clean" />
			<arg line="install" />
		</maven>		
	</target>	
	
	<target name="dev-pom">
		<maven dir="../org.openl.rules.dev-pom">
			<arg line="clean" />
			<arg line="install" />
		</maven>		
	</target>	

	<target name="poi-pom">
		<maven dir="../org.openl.lib.poi35.dev-pom">
			<arg line="clean" />
			<arg line="install" />
		</maven>		
	</target>	
	
	<target name="studio-pom">
		<maven dir="../org.openl.rules.studio-pom">
			<arg line="clean" />
			<arg line="install" />
		</maven>		
	</target>	
	
	<target name="ruleservice-pom">
		<maven dir="../org.openl.rules.ruleservice-pom">
			<arg line="clean" />
			<arg line="install" />
		</maven>		
	</target>	

	<target name="eclipse-pom">
		<maven dir="../org.openl.rules.eclipse-pom">
			<arg line="-e" />
			<arg line="clean" />
			<arg line="install" />
		</maven>		
	</target>	

	
	<target name="project-codegen-pom">
		<maven dir="../org.openl.rules.gen">
			<arg line="clean" />
			<arg line="install" />
		</maven>		
	</target>	
	
	
	<target name="singleWorkspace" depends="poi-pom, base-pom, dev-pom, studio-pom,ruleservice-pom,eclipse-pom">
	</target>


	<target name="fullSVNProjectsStructure">
		<maven dir=".">
			<arg line="clean" />
			<arg line="install" />
		</maven>
		
		<maven dir="${rootFolder}/WSFrontend/branches/iteration2_merge/org.openl.rules.ruleservice-pom">
			<arg line="clean" />
			<arg line="install" />
		</maven>		
		<maven dir="${rootFolder}/DEV/branches/iteration2_merge/org.openl.rules.dev-pom">
			<arg line="clean" />
			<arg line="install" />
		</maven>		
		<maven dir="${rootFolder}/STUDIO/branches/iteration2_merge/org.openl.rules.studio-pom">
			<arg line="clean" />
			<arg line="install" />
		</maven>		
		<maven dir="${rootFolder}/Eclipse/branches/iteration2_merge/org.openl.rules.eclipse-pom">
			<arg line="clean" />
			<arg line="install" />
		</maven>
	</target>
</project>
