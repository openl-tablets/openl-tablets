# OpenL Tablets Environment Configuration
# Copy this file to .env and customize for your local development environment
#
# Usage: cp .env.example .env

# ============================================================================
# Database Configuration
# ============================================================================

# Database Type: postgresql, mysql, oracle, h2
DB_TYPE=postgresql

# PostgreSQL (default)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=openl
DB_USER=openl
DB_PASSWORD=openl
SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/openl
SPRING_DATASOURCE_USERNAME=openl
SPRING_DATASOURCE_PASSWORD=openl
SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.postgresql.Driver
SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.PostgreSQLDialect

# MySQL (uncomment to use)
# DB_HOST=localhost
# DB_PORT=3306
# DB_NAME=openl
# DB_USER=openl
# DB_PASSWORD=openl
# SPRING_DATASOURCE_URL=jdbc:mysql://localhost:3306/openl?useSSL=false&serverTimezone=UTC
# SPRING_DATASOURCE_USERNAME=openl
# SPRING_DATASOURCE_PASSWORD=openl
# SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.mysql.cj.jdbc.Driver
# SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.MySQL8Dialect

# Oracle (uncomment to use)
# DB_HOST=localhost
# DB_PORT=1521
# DB_NAME=XE
# DB_USER=openl
# DB_PASSWORD=openl
# SPRING_DATASOURCE_URL=jdbc:oracle:thin:@localhost:1521:XE
# SPRING_DATASOURCE_USERNAME=openl
# SPRING_DATASOURCE_PASSWORD=openl
# SPRING_DATASOURCE_DRIVER_CLASS_NAME=oracle.jdbc.OracleDriver
# SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.OracleDialect

# H2 In-Memory (for quick testing)
# SPRING_DATASOURCE_URL=jdbc:h2:mem:openl
# SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.h2.Driver
# SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.H2Dialect
# SPRING_JPA_HIBERNATE_DDL_AUTO=create-drop

# ============================================================================
# Application Settings
# ============================================================================

# Server
SERVER_PORT=8080
SERVER_SERVLET_CONTEXT_PATH=/

# Logging
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_ORG_OPENL=INFO
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=WARN
LOGGING_FILE_NAME=logs/openl-tablets.log

# ============================================================================
# OpenL Studio Settings
# ============================================================================

# Workspace Directory
STUDIO_WORKSPACE=/tmp/openl-workspace
# Or for persistent workspace:
# STUDIO_WORKSPACE=${HOME}/openl/workspace

# Repository Configuration
REPOSITORY_FACTORY_CLASS=org.openl.rules.repository.git.GitRepositoryFactory
# REPOSITORY_FACTORY_CLASS=org.openl.rules.repository.LocalRepositoryFactory

# Design Repository (where rules are authored)
DESIGN_REPOSITORY_URI=file:///tmp/openl-design-repository
# Or Git repository:
# DESIGN_REPOSITORY_URI=https://github.com/your-org/openl-rules-design.git
# DESIGN_REPOSITORY_BRANCH=master

# Production Repository (where deployed rules are stored)
PRODUCTION_REPOSITORY_URI=file:///tmp/openl-production-repository

# ============================================================================
# Rule Services (WSFrontend) Settings
# ============================================================================

# Services Port
SERVICES_PORT=8081

# Data Source for Rule Services
RULESERVICE_DATASOURCE_TYPE=git
RULESERVICE_DATASOURCE_URI=file:///tmp/openl-production-repository
RULESERVICE_DATASOURCE_BRANCH=master

# Hot Reload
RULESERVICE_HOT_RELOAD_ENABLED=true
RULESERVICE_HOT_RELOAD_INTERVAL=5000

# ============================================================================
# Security Settings
# ============================================================================

# Authentication Type: db, saml, oauth2, ldap
SECURITY_AUTH_TYPE=db

# SAML (uncomment to use)
# SECURITY_SAML_ENABLED=true
# SECURITY_SAML_IDP_METADATA_URL=https://idp.example.com/metadata
# SECURITY_SAML_ENTITY_ID=openl-webstudio
# SECURITY_SAML_SP_METADATA_PATH=/saml/metadata

# OAuth2 (uncomment to use)
# SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_OKTA_CLIENT_ID=your-client-id
# SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_OKTA_CLIENT_SECRET=your-client-secret
# SPRING_SECURITY_OAUTH2_CLIENT_PROVIDER_OKTA_ISSUER_URI=https://your-domain.okta.com/oauth2/default

# LDAP (uncomment to use)
# SECURITY_LDAP_ENABLED=true
# SECURITY_LDAP_URL=ldap://localhost:389
# SECURITY_LDAP_BASE_DN=dc=example,dc=com
# SECURITY_LDAP_USER_DN_PATTERN=uid={0},ou=people
# SECURITY_LDAP_GROUP_SEARCH_BASE=ou=groups
# SECURITY_LDAP_GROUP_SEARCH_FILTER=member={0}

# ============================================================================
# Performance Tuning
# ============================================================================

# JVM Options (for npm scripts)
JAVA_OPTS=-Xmx2g -Xms1g -XX:+UseG1GC

# Connection Pool
SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=20
SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE=5
SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT=30000

# Cache
SPRING_CACHE_TYPE=ehcache
SPRING_CACHE_EHCACHE_CONFIG=classpath:ehcache.xml

# ============================================================================
# Observability & Monitoring
# ============================================================================

# Actuator
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=always

# OpenTelemetry (uncomment to use)
# OPENTELEMETRY_ENABLED=true
# OPENTELEMETRY_EXPORTER_TYPE=otlp
# OPENTELEMETRY_EXPORTER_ENDPOINT=http://localhost:4317
# OPENTELEMETRY_SERVICE_NAME=openl-webstudio

# ============================================================================
# Development Settings
# ============================================================================

# Spring DevTools
SPRING_DEVTOOLS_RESTART_ENABLED=true
SPRING_DEVTOOLS_LIVERELOAD_ENABLED=true

# Hibernate
SPRING_JPA_SHOW_SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL=true
SPRING_JPA_PROPERTIES_HIBERNATE_USE_SQL_COMMENTS=true
SPRING_JPA_HIBERNATE_DDL_AUTO=validate

# Liquibase
SPRING_LIQUIBASE_ENABLED=true

# ============================================================================
# Docker Settings (for docker-compose)
# ============================================================================

# Compose Project Name
COMPOSE_PROJECT_NAME=openl-dev

# ============================================================================
# Advanced Settings
# ============================================================================

# File Encoding
FILE_ENCODING=UTF-8

# Timezone
TZ=UTC

# Temporary Directory
JAVA_IO_TMPDIR=/tmp
